<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Funcionário</title>

    <link rel="stylesheet" href="/css/style.css">
    <script defer src="/scripts/script.js"></script>
</head>
<body>
    <div class="fun-app">

        <header class="fun-header" th:insert="~{fragments/nav :: nav}"></header>
        
        <main class="fun-main">

            <ul th:if="${!#lists.isEmpty(funcionarioLista)}" class="fun-profile-list">
                <li class="fun-profile" th:each="funcionario : ${funcionarioLista}">

                    <ul class="fun-profile-info">
                        <li hidden th:text="'ID: ' + ${funcionario.id}"></li>

                        <li th:if="${funcionario.nome != null}" th:text="'Nome: ' + ${funcionario.nome}"></li>
                        <li th:if="${funcionario.nome == null}">Sem nome</li>

                        <li th:if="${funcionario.cargo != null}" th:text="'Cargo: ' + ${funcionario.cargo.nome}"></li>
                        <li th:if="${funcionario.cargo == null}">Sem cargo</li>

                        <li th:if="${funcionario.departamento != null}" th:text="'Departamento: ' + ${funcionario.departamento.nome}"></li>
                        <li th:if="${funcionario.departamento == null}">Sem departamento</li>

                        <li th:if="${funcionario.cpf != null}" th:text="'CPF: ' + ${funcionario.cpf}"></li>
                        <li th:if="${funcionario.cpf == null}">Sem CPF</li>

                        <li th:if="${funcionario.email != null}" th:text="'E-Mail: ' + ${funcionario.email}"></li>
                        <li th:if="${funcionario.email == null}">Sem e-mail</li>

                        <li th:if="${funcionario.telefone != null}" th:text="'Telefone: ' + ${funcionario.telefone}"></li>
                        <li th:if="${funcionario.telefone == null}">Sem telefone</li>

                        <li th:if="${funcionario.endereco != null}" th:text="'Endereço: ' + ${funcionario.endereco.logradouro}"></li>
                        <li th:if="${funcionario.endereco == null}">Sem endereço</li>

                        <li th:if="${funcionario.ativo == true}">Funcionário ativo</li>
                        <li th:if="${funcionario.ativo != true}">Funcionário não ativo</li>
                    </ul>

                    <div class="fun-profile-actions">

                        <form th:action="@{/funcionario/gerenciar_funcionario/{id} (id=${funcionario.id})}"
                            th:method="GET">

                            <button type="submit" class="fun-submit">SELECIONAR</button>  
                        </form>

                        <form th:action="@{/funcionario/gerenciar_funcionario/{id} (id=${funcionario.id})}"
                            th:method="POST">

                            <input type="hidden" name="_method" value="DELETE">

                            <button type="submit" class="fun-submit">REMOVER</button>  
                        </form>
                          
                    </div>

                </li>  
            </ul>

            <div class="fun-edit-form" th:if="${funcionarioSelecionado != null}"
                th:insert="~{fragments/edit_form :: edit_form}"></div>

            <div th:if="${#lists.isEmpty(funcionarioLista) && messageStyle == null}" class="fun-message fun-sucess">
                <p>Não há funcionários cadastrados no sistema.</p>
            </div>

            <div th:if="${messageStyle == 'fun-message fun-sucess'}" th:class="${messageStyle}">
                <p th:text="${messageText}"></p>
            </div>

            <div th:if="${messageStyle == 'fun-message fun-error'}" th:class="${messageStyle}">
                <ul th:if="${messageText}">
                    <li th:each="error : ${messageText}" th:text="${error}"></li>
                </ul>
            </div>
        
        </main>
    
    </div>
</body>
</html>